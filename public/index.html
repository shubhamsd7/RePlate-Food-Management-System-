<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re:Plate - Turn Food Waste into Food Security</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --emerald: #10b981;
            --emerald-dark: #059669;
            --amber: #f59e0b;
            --amber-dark: #d97706;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
            --gray-900: #111827;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--gray-900);
            line-height: 1.6;
            background: white;
        }

        /* Navigation */
        nav {
            position: sticky;
            top: 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--gray-800);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--emerald);
        }

        .cta-button {
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
            border: none;
            cursor: pointer;
            display: inline-block;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, #0f766e 0%, #065f46 100%);
            color: white;
            padding: 5rem 2rem;
            text-align: center;
        }

        .hero-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .hero-tag {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.95;
            line-height: 1.7;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            background: white;
            color: var(--emerald-dark);
            padding: 1rem 2rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255,255,255,0.3);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            border: 2px solid white;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--emerald-dark);
        }

        /* Stats Bar */
        .stats-bar {
            background: white;
            padding: 3rem 2rem;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            position: relative;
            margin-top: -3rem;
            border-radius: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        .stat-item .number {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-item .label {
            color: var(--gray-600);
            font-size: 1rem;
        }

        /* Section Styles */
        section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-tag {
            color: var(--emerald);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .section-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .section-header p {
            font-size: 1.2rem;
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
        }

        /* How It Works */
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .step-card {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            background: var(--gray-50);
            transition: all 0.3s;
        }

        .step-card:hover {
            background: white;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1.5rem;
        }

        .step-card h3 {
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }

        .step-card p {
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            border: 2px solid var(--gray-100);
            transition: all 0.3s;
        }

        .feature-card:hover {
            border-color: var(--emerald);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.15);
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }

        .feature-card p {
            color: var(--gray-600);
            line-height: 1.6;
        }

        /* Impact Section */
        .impact-bg {
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
        }

        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .impact-card {
            background: white;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .impact-card h3 {
            color: var(--emerald);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .impact-card .subtitle {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
        }

        .impact-metric {
            margin-bottom: 1rem;
        }

        .impact-metric .big-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .impact-metric .description {
            color: var(--gray-600);
            font-size: 0.95rem;
        }

        /* CTA Cards */
        .cta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .cta-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .cta-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        .cta-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .cta-card-content {
            padding: 2rem;
        }

        .cta-card h3 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
            color: var(--gray-900);
        }

        .cta-card ul {
            list-style: none;
            margin-bottom: 1.5rem;
        }

        .cta-card ul li {
            padding: 0.5rem 0;
            color: var(--gray-600);
            padding-left: 1.5rem;
            position: relative;
        }

        .cta-card ul li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--emerald);
            font-weight: 700;
        }

        /* Footer */
        footer {
            background: var(--gray-900);
            color: white;
            padding: 3rem 2rem 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h4 {
            margin-bottom: 1rem;
            color: var(--emerald);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-section a {
            color: var(--gray-200);
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--gray-800);
            color: var(--gray-200);
        }

        /* Dashboard Sections (Hidden by Default) */
        .dashboard-section {
            display: none;
            min-height: 100vh;
            padding: 4rem 2rem;
            background: var(--gray-50);
        }

        .dashboard-section.active {
            display: block;
        }

        .dashboard-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .dashboard-header h1 {
            margin-bottom: 0.5rem;
            color: var(--gray-900);
        }

        .back-button {
            background: var(--gray-200);
            color: var(--gray-800);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: var(--gray-300);
        }

        .form-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--emerald);
        }

        .donation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .donation-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--emerald);
            transition: all 0.3s;
        }

        .donation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .donation-card h3 {
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .donation-card .food-type {
            color: var(--amber);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .donation-card .info {
            color: var(--gray-600);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .donation-card button {
            margin-top: 1rem;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .alert.info {
            background: #dbeafe;
            color: #1e40af;
        }

        .alert.success {
            background: #d1fae5;
            color: #065f46;
        }

        .leaderboard-item {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .leaderboard-item.gold {
            border-left: 4px solid #fbbf24;
        }

        .leaderboard-item.silver {
            border-left: 4px solid #9ca3af;
        }

        .leaderboard-item.bronze {
            border-left: 4px solid #d97706;
        }

        .rank {
            font-size: 1.5rem;
            font-weight: 700;
            width: 50px;
        }

        .shelter-name {
            flex: 1;
            font-weight: 600;
            color: var(--gray-900);
        }

        .points {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--emerald);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }

            .section-header h2 {
                font-size: 1.75rem;
            }

            .nav-links {
                display: none;
            }

            .cta-grid {
                grid-template-columns: 1fr;
            }

            .stats-bar {
                margin-top: 0;
                border-radius: 0;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Authentication Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2.5rem;
            border-radius: 16px;
            width: 90%;
            max-width: 480px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideDown 0.3s ease;
            position: relative;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close-modal {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: var(--gray-600);
            transition: color 0.3s;
            line-height: 1;
        }

        .close-modal:hover {
            color: var(--emerald);
        }

        .auth-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .auth-form input, .auth-form select {
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 1rem;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        .auth-form input:focus, .auth-form select:focus {
            outline: none;
            border-color: var(--emerald);
        }

        .auth-form button[type="submit"] {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .auth-form button[type="submit"]:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }

        .auth-form p {
            text-align: center;
            margin-top: 1rem;
            color: var(--gray-600);
        }

        .auth-form p a {
            color: var(--emerald);
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
        }

        .auth-form p a:hover {
            text-decoration: underline;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-size: 0.95rem;
            color: var(--gray-700);
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin: 0;
            cursor: pointer;
        }

        .user-welcome {
            background: linear-gradient(135deg, var(--emerald-dark) 0%, var(--amber-dark) 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-welcome h3 {
            margin: 0;
            font-size: 1.4rem;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 0.5rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: white;
            color: var(--emerald-dark);
        }

        /* Profile Dropdown */
        .profile-container {
            position: relative;
            display: none;
        }

        .profile-container.active {
            display: block;
        }

        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.3s;
        }

        .profile-icon:hover {
            transform: scale(1.1);
        }

        .profile-dropdown {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-width: 200px;
            display: none;
            z-index: 1000;
            overflow: hidden;
        }

        .profile-dropdown.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .profile-dropdown-header {
            padding: 1rem;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            color: white;
        }

        .profile-dropdown-header h4 {
            margin: 0 0 0.25rem 0;
            font-size: 1rem;
        }

        .profile-dropdown-header p {
            margin: 0;
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .profile-dropdown-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .profile-dropdown-menu li {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid var(--gray-100);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .profile-dropdown-menu li:hover {
            background: var(--gray-50);
        }

        .profile-dropdown-menu li:last-child {
            border-bottom: none;
        }

        .nav-auth-container {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        /* Notification Bell Styles */
        .notification-container {
            position: relative;
            display: none;
        }

        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--gray-700);
            transition: color 0.2s;
        }

        .notification-bell:hover {
            color: var(--emerald);
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            display: none;
        }

        .notification-badge.show {
            display: flex;
        }

        .notification-dropdown {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            width: 350px;
            max-height: 500px;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s;
            z-index: 1001;
        }

        .notification-dropdown.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .notification-dropdown-header {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-dropdown-header h4 {
            margin: 0;
            font-size: 1rem;
            color: var(--gray-900);
        }

        .mark-all-read-btn {
            background: none;
            border: none;
            color: var(--emerald);
            font-size: 0.875rem;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .mark-all-read-btn:hover {
            background: var(--gray-100);
        }

        .notification-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .notification-item {
            padding: 1rem;
            border-bottom: 1px solid var(--gray-100);
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: start;
            gap: 0.75rem;
        }

        .notification-item:hover {
            background: var(--gray-50);
        }

        .notification-item.unread {
            background: #f0fdf4;
        }

        .notification-item.unread:hover {
            background: #dcfce7;
        }

        .notification-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .notification-content {
            flex: 1;
        }

        .notification-message {
            color: var(--gray-800);
            font-size: 0.875rem;
            margin: 0 0 0.25rem 0;
        }

        .notification-time {
            color: var(--gray-500);
            font-size: 0.75rem;
        }

        .notification-unread-dot {
            width: 8px;
            height: 8px;
            background: var(--emerald);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 0.5rem;
        }

        .notification-empty {
            padding: 2rem;
            text-align: center;
            color: var(--gray-500);
        }

        /* Inspiration Section Styles */
        .inspiration-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 2rem;
            background: #f8f9fa;
            min-height: 100vh;
        }

        .inspiration-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .inspiration-badge {
            background: #fef3c7;
            color: #854d0e;
            padding: 0.5rem 1.25rem;
            border-radius: 25px;
            font-size: 0.9rem;
            display: inline-block;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .inspiration-header h1 {
            font-size: 3.5rem;
            color: #1a202c;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .inspiration-subtitle {
            font-size: 1.25rem;
            color: #4a5568;
            margin: 0;
        }

        .inspiration-content-card {
            background: white;
            padding: 2.5rem;
            border-radius: 12px;
            margin-bottom: 2.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .inspiration-content-card h2 {
            font-size: 1.5rem;
            color: #1a202c;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .inspiration-content-card p {
            font-size: 1.05rem;
            color: #4a5568;
            line-height: 1.8;
            margin: 0;
        }

        .inspiration-image-container {
            margin-bottom: 2.5rem;
        }

        .inspiration-image-container img {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .inspiration-image-caption {
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
            margin-top: 1rem;
            font-style: italic;
        }

        .inspiration-stats-section {
            background: #fef9e7;
            padding: 3rem 2rem;
            border-radius: 16px;
            margin-bottom: 3rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .inspiration-stat-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .inspiration-stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            margin: 0 auto 1rem;
        }

        .inspiration-stat-card h3 {
            font-size: 1.5rem;
            color: #1a202c;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .inspiration-stat-card p {
            font-size: 0.95rem;
            color: #6b7280;
            margin: 0;
            line-height: 1.5;
        }

        .inspiration-cta {
            background: linear-gradient(135deg, #fbbf24 0%, #10b981 100%);
            padding: 3.5rem 2.5rem;
            border-radius: 16px;
            text-align: center;
            color: white;
        }

        .inspiration-cta h2 {
            font-size: 2rem;
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .inspiration-cta p {
            font-size: 1.15rem;
            margin-bottom: 2rem;
            opacity: 0.95;
        }

        .inspiration-cta-button {
            background: white;
            color: #10b981;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .inspiration-cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .inspiration-header h1 {
                font-size: 2.25rem;
            }

            .inspiration-subtitle {
                font-size: 1rem;
            }

            .inspiration-content-card {
                padding: 1.75rem;
            }

            .inspiration-stats-section {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .inspiration-cta {
                padding: 2.5rem 1.5rem;
            }

            .inspiration-cta h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo" onclick="window.location.href = '/';" style="display: flex; flex-direction: column; align-items: center; cursor: pointer; gap: 0.15rem;">
                <div style="width: 45px; height: 45px; overflow: hidden; display: flex; align-items: center; justify-content: center;">
                    <img src="attached_assets/ChatGPT Image Oct 19, 2025, 01_56_51 AM_1760857932711.png" alt="RePlate Logo" style="width: 45px; height: auto; display: block;">
                </div>
                <span style="font-size: 1rem; font-weight: 700; font-family: 'Poppins', sans-serif; color: #333;">RePlate</span>
            </div>
            <ul class="nav-links">
                <li><a href="#" onclick="showLanding(); return false;">Home</a></li>
                <li><a href="#how-it-works">How It Works</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#impact">Impact</a></li>
                <li><a href="#" onclick="showInspiration(); return false;">Inspiration</a></li>
            </ul>
            <div class="nav-auth-container">
                <!-- Show when NOT logged in -->
                <button id="navGetStarted" class="cta-button" onclick="showGetStartedModal()">Get Started</button>
                
                <!-- Notification Bell (show when logged in) -->
                <div id="notificationContainer" class="notification-container">
                    <div class="notification-bell" onclick="toggleNotificationDropdown()">
                        üîî
                        <span id="notificationBadge" class="notification-badge">0</span>
                    </div>
                    <div id="notificationDropdown" class="notification-dropdown">
                        <div class="notification-dropdown-header">
                            <h4>Notifications</h4>
                            <button class="mark-all-read-btn" onclick="markAllNotificationsRead()">Mark all read</button>
                        </div>
                        <ul id="notificationList" class="notification-list">
                            <li class="notification-empty">No notifications yet</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Show when logged in -->
                <div id="navProfile" class="profile-container">
                    <div class="profile-icon" onclick="toggleProfileDropdown()">
                        <span id="profileInitial">U</span>
                    </div>
                    <div id="profileDropdown" class="profile-dropdown">
                        <div class="profile-dropdown-header">
                            <h4 id="profileName">User</h4>
                            <p id="profileEmail">user@example.com</p>
                        </div>
                        <ul class="profile-dropdown-menu">
                            <li onclick="showChangeAddress()">üìç Change Address</li>
                            <li onclick="goToDashboard()">üè† Dashboard</li>
                            <li onclick="handleLogout()">üö™ Logout</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Landing Page -->
    <div id="landing-page">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <div class="hero-tag">Solving hunger, one meal at a time</div>
                <h1>Turn Food Waste into Food Security</h1>
                <p>Every day, restaurants throw away 22 billion pounds of food while 1 in 8 Americans face hunger. What if we could solve both problems with one text message?</p>
                <div class="hero-buttons">
                    <a href="#" class="btn-primary" onclick="showDashboard('restaurant'); return false;">I'm a Restaurant</a>
                    <a href="#" class="btn-secondary" onclick="showDashboard('shelter'); return false;">I'm a Shelter</a>
                </div>
            </div>
        </section>

        <!-- Stats Bar -->
        <div class="stats-bar fade-in">
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="number" id="heroMeals">0+</div>
                    <div class="label">Meals Saved</div>
                </div>
                <div class="stat-item">
                    <div class="number" id="heroCarbon">0 lbs</div>
                    <div class="label">CO‚ÇÇ Prevented</div>
                </div>
                <div class="stat-item">
                    <div class="number" id="heroPartners">0+</div>
                    <div class="label">Partners</div>
                </div>
                <div class="stat-item">
                    <div class="number">Under 10s</div>
                    <div class="label">Average matching time</div>
                </div>
            </div>
        </div>

        <!-- How It Works -->
        <section id="how-it-works">
            <div class="section-header">
                <div class="section-tag">How It Works</div>
                <h2>Seamless Food Redistribution in 4 Simple Steps</h2>
                <p>Our platform makes it effortless to connect surplus food with those who need it most</p>
            </div>
            <div class="steps-grid">
                <div class="step-card fade-in">
                    <div class="step-number">01</div>
                    <h3>Post Surplus</h3>
                    <p>Restaurant posts available food with details: quantity, type, expiration time</p>
                </div>
                <div class="step-card fade-in">
                    <div class="step-number">02</div>
                    <h3>Smart Match</h3>
                    <p>Platform matches with nearby shelters based on distance, capacity, and dietary needs</p>
                </div>
                <div class="step-card fade-in">
                    <div class="step-number">03</div>
                    <h3>Instant Alert</h3>
                    <p>Shelter receives SMS notification and claims food in seconds via simple text reply</p>
                </div>
                <div class="step-card fade-in">
                    <div class="step-number">04</div>
                    <h3>Track Impact</h3>
                    <p>Both parties see real-time updates, directions, and environmental impact metrics</p>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section id="features">
            <div class="section-header">
                <div class="section-tag">Features</div>
                <h2>Built for Maximum Impact & Efficiency</h2>
            </div>
            <div class="features-grid">
                <div class="feature-card fade-in">
                    <div class="feature-icon">üìç</div>
                    <h3>Geolocation</h3>
                    <p>Smart matching based on proximity, ensuring food reaches shelters while still fresh</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">üì±</div>
                    <h3>In-App Notifications</h3>
                    <p>Instant alerts displayed in the app when restaurants or shelters log in</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">üå±</div>
                    <h3>Carbon Calculator</h3>
                    <p>Track environmental impact with EPA-based metrics. See CO‚ÇÇ savings in real-time</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">üèÜ</div>
                    <h3>Gamification & Leaderboards</h3>
                    <p>Restaurant rankings, impact badges, and monthly champions drive engagement</p>
                </div>
                <div class="feature-card fade-in">
                    <div class="feature-icon">üìä</div>
                    <h3>Predictive Analytics</h3>
                    <p>Simple statistical data based on platform stats and current market trends</p>
                </div>
            </div>
        </section>

        <!-- Impact Section -->
        <section id="impact" class="impact-bg">
            <div class="section-header">
                <div class="section-tag">Impact</div>
                <h2>Triple Bottom Line Impact</h2>
                <p>Creating value for the environment, society, and economy</p>
            </div>
            <div class="impact-grid">
                <div class="impact-card fade-in">
                    <h3>üåç Environmental</h3>
                    <p class="subtitle">Reducing carbon footprint and food waste</p>
                    <div class="impact-metric">
                        <div class="big-number">125,000 lbs CO‚ÇÇ</div>
                        <div class="description">Emissions prevented monthly</div>
                    </div>
                    <div class="impact-metric">
                        <div class="big-number">4M tons annually</div>
                        <div class="description">Food waste diverted at scale</div>
                    </div>
                </div>
                <div class="impact-card fade-in">
                    <h3>ü§ù Social</h3>
                    <p class="subtitle">Feeding communities and fighting hunger</p>
                    <div class="impact-metric">
                        <div class="big-number">50,000+ meals</div>
                        <div class="description">Delivered to those in need</div>
                    </div>
                    <div class="impact-metric">
                        <div class="big-number">1 in 8 Americans</div>
                        <div class="description">Face hunger - we're helping</div>
                    </div>
                </div>
                <div class="impact-card fade-in">
                    <h3>üí∞ Economic</h3>
                    <p class="subtitle">Creating value for businesses and communities</p>
                    <div class="impact-metric">
                        <div class="big-number">$6B social value</div>
                        <div class="description">Created nationally at scale</div>
                    </div>
                    <div class="impact-metric">
                        <div class="big-number">Tax deductions</div>
                        <div class="description">Automatic receipt generation</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section>
            <div class="section-header">
                <h2>Ready to Make an Impact?</h2>
                <p>Join hundreds of restaurants and shelters already using Re:Plate</p>
            </div>
            <div class="cta-grid">
                <div class="cta-card fade-in">
                    <img src="attached_assets/stock_images/restaurant_kitchen_f_e6535ca6.jpg" alt="Restaurant Kitchen">
                    <div class="cta-card-content">
                        <h3>For Restaurants</h3>
                        <p style="color: var(--gray-600); margin-bottom: 1rem;">Turn surplus into impact</p>
                        <ul>
                            <li>Post surplus food in under 30 seconds</li>
                            <li>Get tax deduction receipts automatically</li>
                            <li>Climb the impact leaderboard</li>
                            <li>Reduce waste disposal costs</li>
                        </ul>
                        <button class="cta-button" onclick="showDashboard('restaurant')">Get Started as Restaurant</button>
                    </div>
                </div>
                <div class="cta-card fade-in">
                    <img src="images/shelter-volunteers.png" alt="Food Bank Volunteers">
                    <div class="cta-card-content">
                        <h3>For Shelters</h3>
                        <p style="color: var(--gray-600); margin-bottom: 1rem;">Access reliable food sources</p>
                        <ul>
                            <li>Claim donations via simple SMS</li>
                            <li>Real-time notifications for nearby food</li>
                            <li>Track inventory and dietary needs</li>
                            <li>Connect with local restaurants</li>
                        </ul>
                        <button class="cta-button" onclick="showDashboard('shelter')">Get Started as Shelter</button>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Inspiration Section -->
    <div id="inspiration-page" style="display: none;">
        <div class="inspiration-container">
            <!-- Header Section -->
            <div class="inspiration-header">
                <span class="inspiration-badge">üí° Our Inspiration</span>
                <h1>Where It All Began</h1>
                <p class="inspiration-subtitle">The moment that sparked our mission to fight food waste</p>
            </div>

            <!-- The Spark Section -->
            <div class="inspiration-content-card">
                <h2>The Spark</h2>
                <p>Today, our team was brainstorming ideas for our project when we noticed something that sparked our inspiration. During lunch, we noticed a significant amount of surplus food left over, and later, we heard that even more food was left over after the second round. We didn't know whether the food was reused or just thrown away, which made us think deeply about how much food actually goes to waste.</p>
            </div>

            <!-- Main Image -->
            <div class="inspiration-image-container">
                <img src="attached_assets/IMG_3612_1760847880075.jpg" alt="Dinner at the UT Hackathon - surplus food being wasted">
                <p class="inspiration-image-caption">Dinner at the UT Hackathon - surplus food being wasted</p>
            </div>

            <!-- Our Mission Section -->
            <div class="inspiration-content-card">
                <h2>Our Mission</h2>
                <p>We researched the issue further and discovered that food waste is a massive global problem, while hunger remains a critical challenge for millions. Seeing those statistics made us realize that even a small initiative could make a big difference. That's when we decided to build our project around reducing food waste and helping redistribute surplus food to the needy.</p>
            </div>

            <!-- Stats Cards -->
            <div class="inspiration-stats-section">
                <div class="inspiration-stat-card">
                    <div class="inspiration-stat-icon" style="background: linear-gradient(135deg, #fef3c7, #fbbf24);">
                        üìà
                    </div>
                    <h3>1.3 Billion Tons</h3>
                    <p>of food wasted globally each year</p>
                </div>
                <div class="inspiration-stat-card">
                    <div class="inspiration-stat-icon" style="background: linear-gradient(135deg, #dcfce7, #10b981);">
                        üíö
                    </div>
                    <h3>828 Million</h3>
                    <p>people facing hunger worldwide</p>
                </div>
                <div class="inspiration-stat-card">
                    <div class="inspiration-stat-icon" style="background: linear-gradient(135deg, #dbeafe, #3b82f6);">
                        üí°
                    </div>
                    <h3>Small Actions</h3>
                    <p>can make a big difference</p>
                </div>
            </div>

            <!-- CTA Section -->
            <div class="inspiration-cta">
                <h2>Join Us in Making a Difference</h2>
                <p>Together, we can reduce food waste and help those in need</p>
                <button class="inspiration-cta-button" onclick="showLanding()">Learn More About Our Solution</button>
            </div>
        </div>
    </div>

    <!-- Get Started Modal -->
    <div id="getStartedModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeGetStartedModal()">&times;</span>
            
            <div class="auth-form" style="text-align: center;">
                <h2>üöÄ Get Started with Re:Plate</h2>
                <p style="color: var(--gray-600); margin-bottom: 2rem;">Choose your account type</p>
                
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <button class="cta-button" onclick="selectUserType('restaurant')" style="padding: 1.5rem; font-size: 1.1rem;">
                        üçΩÔ∏è I'm a Restaurant
                    </button>
                    <button class="cta-button" onclick="selectUserType('shelter')" style="padding: 1.5rem; font-size: 1.1rem; background: linear-gradient(135deg, var(--amber) 0%, var(--emerald) 100%);">
                        üè† I'm a Shelter
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAuthModal()">&times;</span>
            
            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h2>üçΩÔ∏è Restaurant Login</h2>
                <form onsubmit="handleLogin(event)">
                    <input type="email" name="email" placeholder="Email Address" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit">Login to Dashboard</button>
                </form>
                <p>Don't have an account? <a onclick="showSignupForm()">Sign up now</a></p>
            </div>
            
            <!-- Signup Form -->
            <div id="signupForm" class="auth-form" style="display:none;">
                <h2>üè™ Register Your Restaurant</h2>
                <form onsubmit="handleSignup(event)">
                    <input type="text" name="businessName" placeholder="Restaurant/Business Name" required>
                    <input type="email" name="email" placeholder="Email Address" required>
                    <input type="password" name="password" placeholder="Password (min 6 characters)" minlength="6" required>
                    <input type="tel" name="phone" placeholder="Phone Number" required>
                    <input type="text" name="address" placeholder="Business Address" required>
                    <button type="submit">Create Account</button>
                </form>
                <p>Already have an account? <a onclick="showLoginForm()">Login here</a></p>
            </div>
        </div>
    </div>

    <!-- Shelter Authentication Modal -->
    <div id="shelterAuthModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeShelterAuthModal()">&times;</span>
            
            <!-- Shelter Login Form -->
            <div id="shelterLoginForm" class="auth-form">
                <h2>üè† Shelter Login</h2>
                <form onsubmit="handleShelterLogin(event)">
                    <input type="email" name="email" placeholder="Email Address" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit">Login to Dashboard</button>
                </form>
                <p>Don't have an account? <a onclick="showShelterSignupForm()">Sign up now</a></p>
            </div>
            
            <!-- Shelter Signup Form -->
            <div id="shelterSignupForm" class="auth-form" style="display:none;">
                <h2>üè† Register Your Shelter</h2>
                <form onsubmit="handleShelterSignup(event)">
                    <input type="text" name="shelterName" placeholder="Shelter/Organization Name" required>
                    <input type="email" name="email" placeholder="Email Address" required>
                    <input type="password" name="password" placeholder="Password (min 6 characters)" minlength="6" required>
                    <input type="tel" name="phone" placeholder="Phone Number" required>
                    <input type="text" name="address" placeholder="Shelter Address" required>
                    <button type="submit">Create Account</button>
                </form>
                <p>Already have an account? <a onclick="showShelterLoginForm()">Login here</a></p>
            </div>
        </div>
    </div>

    <!-- Restaurant Dashboard -->
    <div id="restaurant-dashboard" class="dashboard-section">
        <div class="dashboard-container">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <!-- User Welcome Banner -->
            <div class="user-welcome">
                <div>
                    <h3 id="restaurantWelcome">Welcome!</h3>
                    <p id="restaurantEmail" style="margin: 0; opacity: 0.9;"></p>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>

            <div class="form-card">
                <h2 style="margin-bottom: 1.5rem;">üì§ Post Available Meal</h2>
                <form id="mealPostingForm" onsubmit="createEnhancedDonation(event); return false;">
                    <div class="form-group">
                        <label>Meal Category</label>
                        <select name="mealCategory" required>
                            <option value="">Select Category</option>
                            <option value="breakfast">üç≥ Breakfast</option>
                            <option value="lunch">üçî Lunch</option>
                            <option value="dinner">üçù Dinner</option>
                            <option value="snacks">ü•® Snacks/Appetizers</option>
                            <option value="desserts">üç∞ Desserts</option>
                            <option value="beverages">‚òï Beverages</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Food Description</label>
                        <input type="text" name="foodType" placeholder="e.g., Margarita Pizza, Caesar Salad, Pasta Alfredo" required>
                    </div>
                    <div class="form-group">
                        <label>Number of Meals</label>
                        <input type="number" name="quantity" placeholder="e.g., 25" min="1" required>
                    </div>
                    <div class="form-group">
                        <label>Preparation Time</label>
                        <input type="text" name="prepTime" placeholder="e.g., Freshly prepared, 2 hours ago">
                    </div>
                    <div class="form-group">
                        <label style="margin-bottom: 0.5rem; display: block;">Allergen Information:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="allergens" value="dairy"> Contains Dairy</label>
                            <label><input type="checkbox" name="allergens" value="gluten"> Contains Gluten</label>
                            <label><input type="checkbox" name="allergens" value="nuts"> Contains Nuts</label>
                            <label><input type="checkbox" name="allergens" value="soy"> Contains Soy</label>
                            <label><input type="checkbox" name="allergens" value="eggs"> Contains Eggs</label>
                            <label><input type="checkbox" name="allergens" value="shellfish"> Contains Shellfish</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label style="margin-bottom: 0.5rem; display: block;">Dietary Tags:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="dietary" value="vegetarian"> ü•ó Vegetarian</label>
                            <label><input type="checkbox" name="dietary" value="vegan"> üå± Vegan</label>
                            <label><input type="checkbox" name="dietary" value="halal"> üïå Halal</label>
                            <label><input type="checkbox" name="dietary" value="kosher"> ‚ú°Ô∏è Kosher</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Pickup Address</label>
                        <input type="text" name="address" id="restaurantAddress" placeholder="Your restaurant address" required>
                    </div>
                    <div class="form-group">
                        <label>Expires In (hours)</label>
                        <input type="number" name="expiresIn" placeholder="e.g., 4" min="1" max="24" value="4" required>
                    </div>
                    <button type="submit" class="cta-button">üì§ Post Meal</button>
                </form>
                <div id="donationSuccess"></div>
            </div>

            <div class="form-card">
                <h2 style="margin-bottom: 1.5rem;">Your Recent Donations</h2>
                <div id="restaurantDonations" class="donation-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Shelter Dashboard -->
    <div id="shelter-dashboard" class="dashboard-section">
        <div class="dashboard-container">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <!-- Shelter User Welcome Banner -->
            <div class="user-welcome" id="shelterWelcomeBanner" style="display:none;">
                <div>
                    <h3 id="shelterWelcome">Welcome!</h3>
                    <p id="shelterEmail" style="margin: 0; opacity: 0.9;"></p>
                </div>
                <button class="logout-btn" onclick="logoutShelter()">Logout</button>
            </div>
            
            <div class="dashboard-header">
                <h1>üè† Shelter Dashboard</h1>
                <p>Browse and claim available donations</p>
            </div>

            <div class="form-card">
                <h2 style="margin-bottom: 1.5rem;">Available Donations</h2>
                <div id="donationsList" class="donation-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- My Claimed Donations Section (only visible when logged in) -->
            <div class="form-card" id="claimedDonationsSection" style="display:none;">
                <h2 style="margin-bottom: 1.5rem;">My Claimed Donations</h2>
                <div id="claimedDonationsList" class="donation-grid">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <div class="form-card">
                <h2 style="margin-bottom: 1.5rem;">üèÜ Shelter Leaderboard</h2>
                <p style="color: var(--gray-600); margin-bottom: 1.5rem;">Shelters earn 10 points for each donation pickup!</p>
                <div id="leaderboardList">
                    <!-- Will be populated by JavaScript -->
                </div>
            </div>

            <div class="form-card">
                <h2 style="margin-bottom: 1.5rem;">üåç Environmental Impact</h2>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="number" id="impactMeals" style="color: var(--amber);">342</div>
                        <div class="label">Meals Rescued</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" id="impactCarbon" style="color: var(--emerald);">260 kg</div>
                        <div class="label">CO‚ÇÇ Prevented</div>
                    </div>
                    <div class="stat-item">
                        <div class="number">üå≥ 12</div>
                        <div class="label">Trees Equivalent</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Us Page -->
    <div id="about-page" style="display: none;">
        <div class="dashboard-container" style="padding: 4rem 2rem;">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <div class="form-card">
                <h1 style="background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">About RePlate</h1>
                <p style="font-size: 1.1rem; color: var(--gray-700); line-height: 1.8; margin-bottom: 2rem;">
                    RePlate is a revolutionary platform connecting restaurants with surplus food to local shelters and food banks, 
                    reducing food waste while fighting hunger in our communities.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Our Mission</h2>
                <p style="color: var(--gray-700); line-height: 1.8; margin-bottom: 2rem;">
                    Every day, restaurants in the United States throw away 22 billion pounds of food, while 1 in 8 Americans 
                    face food insecurity. We believe this is a solvable problem. RePlate makes it effortless for restaurants 
                    to donate surplus food to those who need it most, creating a win-win solution for businesses, communities, 
                    and the environment.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Our Impact</h2>
                <div class="stats-grid" style="margin: 2rem 0;">
                    <div class="stat-item">
                        <div class="number" style="color: var(--emerald);">500+</div>
                        <div class="label">Meals Rescued</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" style="color: var(--amber);">380 kg</div>
                        <div class="label">CO‚ÇÇ Prevented</div>
                    </div>
                    <div class="stat-item">
                        <div class="number" style="color: var(--emerald);">25+</div>
                        <div class="label">Active Partners</div>
                    </div>
                </div>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">How It Started</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    RePlate was born at a UT Hackathon, where our team witnessed firsthand the massive amounts of food waste 
                    generated by local restaurants while food banks struggled to meet demand. We realized technology could 
                    bridge this gap instantly, and RePlate was created to make food donation as simple as sending a text message.
                </p>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contact-page" style="display: none;">
        <div class="dashboard-container" style="padding: 4rem 2rem;">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <div class="form-card">
                <h1 style="background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">Contact Us</h1>
                <p style="font-size: 1.1rem; color: var(--gray-700); line-height: 1.8; margin-bottom: 2rem;">
                    Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible.
                </p>
                
                <form onsubmit="handleContactSubmit(event)" style="margin-bottom: 3rem;">
                    <div class="form-group">
                        <label>Name *</label>
                        <input type="text" name="name" placeholder="Your name" required>
                    </div>
                    <div class="form-group">
                        <label>Email *</label>
                        <input type="email" name="email" placeholder="your.email@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Subject *</label>
                        <input type="text" name="subject" placeholder="How can we help?" required>
                    </div>
                    <div class="form-group">
                        <label>Message *</label>
                        <textarea name="message" rows="6" placeholder="Tell us what's on your mind..." required style="resize: vertical;"></textarea>
                    </div>
                    <button type="submit" class="cta-button">Send Message</button>
                </form>
                <div id="contactSuccess" style="display: none; padding: 1rem; background: #d1fae5; color: #065f46; border-radius: 8px; margin-bottom: 2rem;">
                    ‚úÖ Message sent successfully! We'll get back to you soon.
                </div>
                
                <h2 style="color: var(--emerald); margin-top: 3rem; margin-bottom: 1rem;">Other Ways to Reach Us</h2>
                <div style="background: var(--gray-50); padding: 2rem; border-radius: 12px; border-left: 4px solid var(--emerald);">
                    <p style="margin: 0.5rem 0; color: var(--gray-700);"><strong>üìß Email:</strong> support@replate.org</p>
                    <p style="margin: 0.5rem 0; color: var(--gray-700);"><strong>üìç Address:</strong> Austin, TX 78712</p>
                    <p style="margin: 0.5rem 0; color: var(--gray-700);"><strong>üïí Response Time:</strong> Within 24 hours</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Privacy Policy Page -->
    <div id="privacy-page" style="display: none;">
        <div class="dashboard-container" style="padding: 4rem 2rem;">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <div class="form-card">
                <h1 style="background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">Privacy Policy</h1>
                <p style="color: var(--gray-600); margin-bottom: 2rem;"><em>Last updated: October 19, 2025</em></p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Introduction</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    RePlate ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how 
                    we collect, use, disclose, and safeguard your information when you use our platform.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Information We Collect</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    We collect information that you provide directly to us, including:
                </p>
                <ul style="color: var(--gray-700); line-height: 1.8; margin-left: 2rem;">
                    <li><strong>Account Information:</strong> Name, email address, phone number, business name, and address</li>
                    <li><strong>Donation Information:</strong> Food type, quantity, dietary restrictions, and pickup details</li>
                    <li><strong>Usage Data:</strong> Platform interaction data, donation history, and impact metrics</li>
                    <li><strong>Location Data:</strong> Geographic location for matching restaurants with nearby shelters</li>
                </ul>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">How We Use Your Information</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    We use the collected information to:
                </p>
                <ul style="color: var(--gray-700); line-height: 1.8; margin-left: 2rem;">
                    <li>Facilitate food donations between restaurants and shelters</li>
                    <li>Send notifications about donation opportunities and claims</li>
                    <li>Calculate and display environmental impact metrics</li>
                    <li>Improve our platform and user experience</li>
                    <li>Comply with legal obligations and prevent fraud</li>
                </ul>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Data Security</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    We implement appropriate technical and organizational security measures to protect your personal information. 
                    However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Your Rights</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    You have the right to access, update, or delete your personal information at any time. Contact us at 
                    privacy@replate.org to exercise these rights.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Contact Us</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    If you have questions about this Privacy Policy, please contact us at privacy@replate.org.
                </p>
            </div>
        </div>
    </div>

    <!-- Terms of Service Page -->
    <div id="terms-page" style="display: none;">
        <div class="dashboard-container" style="padding: 4rem 2rem;">
            <a href="#" class="back-button" onclick="showLanding(); return false;">‚Üê Back to Home</a>
            
            <div class="form-card">
                <h1 style="background: linear-gradient(135deg, var(--emerald) 0%, var(--amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 1rem;">Terms of Service</h1>
                <p style="color: var(--gray-600); margin-bottom: 2rem;"><em>Last updated: October 19, 2025</em></p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Agreement to Terms</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    By accessing and using RePlate, you agree to be bound by these Terms of Service and all applicable laws and regulations. 
                    If you do not agree with any of these terms, you are prohibited from using this platform.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Use License</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    RePlate grants you a limited, non-exclusive, non-transferable license to use our platform for facilitating 
                    food donations. This license is subject to these Terms of Service.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">User Responsibilities</h2>
                <p style="color: var(--gray-700); line-height: 1.8;"><strong>For Restaurants:</strong></p>
                <ul style="color: var(--gray-700); line-height: 1.8; margin-left: 2rem;">
                    <li>Ensure all donated food is safe for consumption and properly stored</li>
                    <li>Provide accurate information about food type, quantity, and expiration</li>
                    <li>Comply with local health and safety regulations</li>
                    <li>Honor confirmed donation pickups</li>
                </ul>
                
                <p style="color: var(--gray-700); line-height: 1.8; margin-top: 1rem;"><strong>For Shelters:</strong></p>
                <ul style="color: var(--gray-700); line-height: 1.8; margin-left: 2rem;">
                    <li>Only claim donations you can reasonably collect</li>
                    <li>Arrive on time for scheduled pickups</li>
                    <li>Inspect food upon receipt and report any concerns</li>
                    <li>Maintain accurate capacity and dietary requirement information</li>
                </ul>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Liability Disclaimer</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    RePlate acts as a platform to connect restaurants and shelters. We are not responsible for the quality, 
                    safety, or suitability of donated food. Both parties are responsible for compliance with applicable food 
                    safety laws and regulations, including the Bill Emerson Good Samaritan Food Donation Act.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Termination</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    We reserve the right to terminate or suspend access to our platform immediately, without prior notice, 
                    for conduct that violates these Terms of Service or is harmful to other users, us, or third parties.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Changes to Terms</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    We may revise these Terms of Service at any time. The most current version will always be posted on our platform. 
                    By continuing to use RePlate after changes become effective, you agree to be bound by the revised terms.
                </p>
                
                <h2 style="color: var(--emerald); margin-top: 2rem;">Contact Information</h2>
                <p style="color: var(--gray-700); line-height: 1.8;">
                    Questions about the Terms of Service should be sent to legal@replate.org.
                </p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <div style="display: flex; flex-direction: column; align-items: flex-start; margin-bottom: 1rem;">
                    <div style="width: 60px; height: 60px; overflow: hidden; display: flex; align-items: center; justify-content: center; margin-bottom: 0.3rem;">
                        <img src="attached_assets/ChatGPT Image Oct 19, 2025, 01_56_51 AM_1760857932711.png" alt="RePlate Logo" style="width: 60px; height: auto; display: block;">
                    </div>
                    <h4 style="margin: 0; font-size: 1.5rem; font-family: 'Poppins', sans-serif; font-weight: 700;">RePlate</h4>
                </div>
                <p style="color: var(--gray-200); line-height: 1.6;">Connecting restaurants with local shelters to reduce food waste and save the planet, one meal at a time.</p>
            </div>
            <div class="footer-section">
                <h4>Platform</h4>
                <ul>
                    <li><a href="#how-it-works">How It Works</a></li>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#impact">Impact</a></li>
                    <li><a href="#" onclick="showDashboard('restaurant'); return false;">For Restaurants</a></li>
                    <li><a href="#" onclick="showDashboard('shelter'); return false;">For Shelters</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Company</h4>
                <ul>
                    <li><a href="#" onclick="showAbout(); return false;">About Us</a></li>
                    <li><a href="#" onclick="showContact(); return false;">Contact</a></li>
                    <li><a href="#" onclick="showPrivacy(); return false;">Privacy Policy</a></li>
                    <li><a href="#" onclick="showTerms(); return false;">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Re:Plate. Built for Social Impact</p>
        </div>
    </footer>

    <script>
        // API Base URL
        const API_URL = window.location.origin;
        let currentUser = null;

        // Authentication Functions

        // Check if user is logged in
        async function checkAuth() {
            try {
                const response = await fetch(`${API_URL}/api/auth/me`, {
                    credentials: 'include'
                });
                if (response.ok) {
                    const data = await response.json();
                    currentUser = data.user;
                    return data.user;
                }
                currentUser = null;
                return null;
            } catch (error) {
                currentUser = null;
                return null;
            }
        }

        // Handle Login
        async function handleLogin(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const loginData = {
                email: formData.get('email'),
                password: formData.get('password')
            };
            
            try {
                const response = await fetch(`${API_URL}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(loginData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentUser = data.user;
                    updateNavAuthUI();
                    closeAuthModal();
                    showRestaurantDashboard(data.user);
                    form.reset();
                } else {
                    alert(data.error || 'Login failed. Please check your credentials.');
                }
            } catch (error) {
                alert('Login error. Please try again.');
            }
        }

        // Handle Signup
        async function handleSignup(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            const signupData = {
                businessName: formData.get('businessName'),
                email: formData.get('email'),
                password: formData.get('password'),
                phone: formData.get('phone'),
                address: formData.get('address')
            };
            
            try {
                const response = await fetch(`${API_URL}/api/auth/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(signupData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentUser = data.user;
                    updateNavAuthUI();
                    alert('‚úÖ Account created successfully! Welcome to Re:Plate!');
                    closeAuthModal();
                    showRestaurantDashboard(data.user);
                    form.reset();
                } else {
                    alert(data.error || 'Signup failed. Please try again.');
                }
            } catch (error) {
                alert('Signup error. Please try again.');
            }
        }

        // Logout function
        async function logout() {
            try {
                await fetch(`${API_URL}/api/auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                currentUser = null;
                updateNavAuthUI();
                showLanding();
            } catch (error) {
                console.error('Logout error:', error);
                updateNavAuthUI();
                showLanding();
            }
        }

        // Logout handler from profile dropdown
        async function handleLogout() {
            // Log out whichever user type is logged in
            if (currentUser) {
                await logout();
            } else if (currentShelterUser) {
                await logoutShelter();
            }
        }

        // Toggle profile dropdown
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('show');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const profileContainer = document.getElementById('navProfile');
            const dropdown = document.getElementById('profileDropdown');
            
            if (profileContainer && !profileContainer.contains(event.target)) {
                dropdown?.classList.remove('show');
            }
        });

        // Update navigation UI based on auth state
        function updateNavAuthUI() {
            const getStartedBtn = document.getElementById('navGetStarted');
            const profileContainer = document.getElementById('navProfile');
            const notificationContainer = document.getElementById('notificationContainer');
            
            if (currentUser) {
                // Restaurant user is logged in - show profile dropdown and notifications
                getStartedBtn.style.display = 'none';
                profileContainer.classList.add('active');
                notificationContainer.style.display = 'block';
                
                // Update profile info for restaurant
                const initial = currentUser.businessName ? currentUser.businessName.charAt(0).toUpperCase() : 'U';
                document.getElementById('profileInitial').textContent = initial;
                document.getElementById('profileName').textContent = currentUser.businessName || 'User';
                document.getElementById('profileEmail').textContent = currentUser.email || '';
                
                // Start notification polling
                loadNotifications();
                startNotificationPolling();
            } else if (currentShelterUser) {
                // Shelter user is logged in - show profile dropdown and notifications
                getStartedBtn.style.display = 'none';
                profileContainer.classList.add('active');
                notificationContainer.style.display = 'block';
                
                // Update profile info for shelter
                const initial = currentShelterUser.shelterName ? currentShelterUser.shelterName.charAt(0).toUpperCase() : 'S';
                document.getElementById('profileInitial').textContent = initial;
                document.getElementById('profileName').textContent = currentShelterUser.shelterName || 'Shelter';
                document.getElementById('profileEmail').textContent = currentShelterUser.email || '';
                
                // Start notification polling
                loadNotifications();
                startNotificationPolling();
            } else {
                // User is NOT logged in - show Get Started button
                getStartedBtn.style.display = 'block';
                profileContainer.classList.remove('active');
                notificationContainer.style.display = 'none';
                stopNotificationPolling();
            }
        }

        // NOTIFICATION FUNCTIONS
        let notificationPollingInterval = null;

        // Toggle notification dropdown
        function toggleNotificationDropdown() {
            const dropdown = document.getElementById('notificationDropdown');
            const profileDropdown = document.getElementById('profileDropdown');
            
            // Close profile dropdown if open
            profileDropdown.classList.remove('show');
            
            // Toggle notification dropdown
            dropdown.classList.toggle('show');
            
            // If opening, refresh notifications
            if (dropdown.classList.contains('show')) {
                loadNotifications();
            }
        }

        // Load notifications from API
        async function loadNotifications() {
            try {
                const response = await fetch(`${API_URL}/api/notifications`, {
                    credentials: 'include'
                });
                
                if (!response.ok) return;
                
                const notifications = await response.json();
                displayNotifications(notifications);
                updateUnreadCount();
            } catch (error) {
                console.error('Error loading notifications:', error);
            }
        }

        // Display notifications in the dropdown
        function displayNotifications(notifications) {
            const notificationList = document.getElementById('notificationList');
            
            if (notifications.length === 0) {
                notificationList.innerHTML = '<li class="notification-empty">No notifications yet</li>';
                return;
            }
            
            notificationList.innerHTML = notifications.map(notif => {
                const isUnread = !notif.isRead;
                const icon = notif.type === 'new_donation' ? 'üçΩÔ∏è' : '‚úÖ';
                const time = formatNotificationTime(notif.createdAt);
                
                return `
                    <li class="notification-item ${isUnread ? 'unread' : ''}" 
                        onclick="markNotificationRead(${notif.id})">
                        <span class="notification-icon">${icon}</span>
                        <div class="notification-content">
                            <p class="notification-message">${notif.message}</p>
                            <span class="notification-time">${time}</span>
                        </div>
                        ${isUnread ? '<span class="notification-unread-dot"></span>' : ''}
                    </li>
                `;
            }).join('');
        }

        // Update unread count badge
        async function updateUnreadCount() {
            try {
                const response = await fetch(`${API_URL}/api/notifications/unread-count`, {
                    credentials: 'include'
                });
                
                if (!response.ok) return;
                
                const data = await response.json();
                const badge = document.getElementById('notificationBadge');
                
                if (data.count > 0) {
                    badge.textContent = data.count > 99 ? '99+' : data.count;
                    badge.classList.add('show');
                } else {
                    badge.classList.remove('show');
                }
            } catch (error) {
                console.error('Error fetching unread count:', error);
            }
        }

        // Mark a single notification as read
        async function markNotificationRead(notificationId) {
            try {
                await fetch(`${API_URL}/api/notifications/mark-read/${notificationId}`, {
                    method: 'POST',
                    credentials: 'include'
                });
                
                // Refresh notifications
                loadNotifications();
            } catch (error) {
                console.error('Error marking notification as read:', error);
            }
        }

        // Mark all notifications as read
        async function markAllNotificationsRead() {
            try {
                await fetch(`${API_URL}/api/notifications/mark-all-read`, {
                    method: 'POST',
                    credentials: 'include'
                });
                
                // Refresh notifications
                loadNotifications();
            } catch (error) {
                console.error('Error marking all notifications as read:', error);
            }
        }

        // Start notification polling (every 30 seconds)
        function startNotificationPolling() {
            // Clear any existing interval
            stopNotificationPolling();
            
            // Poll immediately
            updateUnreadCount();
            
            // Then poll every 30 seconds
            notificationPollingInterval = setInterval(() => {
                updateUnreadCount();
            }, 30000);
        }

        // Stop notification polling
        function stopNotificationPolling() {
            if (notificationPollingInterval) {
                clearInterval(notificationPollingInterval);
                notificationPollingInterval = null;
            }
        }

        // Format notification time (e.g., "2 minutes ago")
        function formatNotificationTime(timestamp) {
            const now = new Date();
            const notifTime = new Date(timestamp);
            const diffMs = now - notifTime;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins !== 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours !== 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays !== 1 ? 's' : ''} ago`;
            return notifTime.toLocaleDateString();
        }

        // Close notification dropdown when clicking outside
        document.addEventListener('click', (event) => {
            const notificationContainer = document.getElementById('notificationContainer');
            const dropdown = document.getElementById('notificationDropdown');
            
            if (notificationContainer && !notificationContainer.contains(event.target)) {
                dropdown?.classList.remove('show');
            }
        });

        // Navigate to the appropriate dashboard based on logged-in user type
        function goToDashboard() {
            if (currentUser) {
                showDashboard('restaurant');
            } else if (currentShelterUser) {
                showDashboard('shelter');
            }
            // Close the dropdown
            document.getElementById('profileDropdown').classList.remove('show');
        }

        // Show change address modal
        function showChangeAddress() {
            const newAddress = prompt('Enter your new address:', currentUser?.address || currentShelterUser?.address || '');
            if (newAddress && newAddress.trim()) {
                updateUserAddress(newAddress.trim());
            }
            // Close the dropdown
            document.getElementById('profileDropdown').classList.remove('show');
        }

        // Update user address
        async function updateUserAddress(newAddress) {
            try {
                const response = await fetch(`${API_URL}/api/auth/update-address`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ address: newAddress })
                });

                if (response.ok) {
                    currentUser.address = newAddress;
                    alert('‚úÖ Address updated successfully!');
                } else {
                    alert('Failed to update address. Please try again.');
                }
            } catch (error) {
                console.error('Error updating address:', error);
                alert('Error updating address. Please try again.');
            }
        }

        // SHELTER AUTHENTICATION FUNCTIONS
        let currentShelterUser = null;

        // Check if shelter is logged in
        async function checkShelterAuth() {
            try {
                const response = await fetch(`${API_URL}/api/shelter-auth/me`, {
                    credentials: 'include'
                });
                if (response.ok) {
                    const data = await response.json();
                    currentShelterUser = data.user;
                    console.log('‚úÖ Shelter auth checked - User logged in:', currentShelterUser);
                    return data.user;
                }
                currentShelterUser = null;
                console.log('‚ùå Shelter auth checked - No user');
                return null;
            } catch (error) {
                currentShelterUser = null;
                console.log('‚ùå Shelter auth error:', error);
                return null;
            }
        }

        // Shelter login handler
        async function handleShelterLogin(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            try {
                const response = await fetch(`${API_URL}/api/shelter-auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({
                        email: formData.get('email'),
                        password: formData.get('password')
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentShelterUser = data.user;
                    console.log('‚úÖ Shelter login successful, currentShelterUser set to:', currentShelterUser);
                    updateNavAuthUI();
                    closeShelterAuthModal();
                    showShelterDashboard(data.user);
                    form.reset();
                } else {
                    alert(data.error || 'Login failed. Please check your credentials.');
                }
            } catch (error) {
                alert('Login error. Please try again.');
            }
        }

        // Shelter signup handler
        async function handleShelterSignup(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            try {
                const response = await fetch(`${API_URL}/api/shelter-auth/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({
                        shelterName: formData.get('shelterName'),
                        email: formData.get('email'),
                        password: formData.get('password'),
                        phone: formData.get('phone'),
                        address: formData.get('address')
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    currentShelterUser = data.user;
                    alert('‚úÖ Account created successfully! Welcome to Re:Plate!');
                    updateNavAuthUI();
                    closeShelterAuthModal();
                    showShelterDashboard(data.user);
                    form.reset();
                } else {
                    alert(data.error || 'Signup failed. Please try again.');
                }
            } catch (error) {
                alert('Signup error. Please try again.');
            }
        }

        // Shelter logout
        async function logoutShelter() {
            try {
                await fetch(`${API_URL}/api/shelter-auth/logout`, {
                    method: 'POST',
                    credentials: 'include'
                });
                currentShelterUser = null;
                updateNavAuthUI();
                showLanding();
            } catch (error) {
                console.error('Logout error:', error);
                currentShelterUser = null;
                updateNavAuthUI();
                showLanding();
            }
        }

        // Shelter modal controls
        function showShelterLoginForm() {
            document.getElementById('shelterSignupForm').style.display = 'none';
            document.getElementById('shelterLoginForm').style.display = 'block';
        }

        function showShelterSignupForm() {
            document.getElementById('shelterLoginForm').style.display = 'none';
            document.getElementById('shelterSignupForm').style.display = 'block';
        }

        function closeShelterAuthModal() {
            document.getElementById('shelterAuthModal').style.display = 'none';
            showShelterLoginForm(); // Reset to login form
        }

        // Get Started modal controls
        function showGetStartedModal() {
            document.getElementById('getStartedModal').style.display = 'block';
        }

        function closeGetStartedModal() {
            document.getElementById('getStartedModal').style.display = 'none';
        }

        function selectUserType(type) {
            closeGetStartedModal();
            showDashboard(type);
        }

        // Show shelter dashboard with user data
        function showShelterDashboard(user) {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.add('active');
            
            if (user) {
                // Show welcome banner
                document.getElementById('shelterWelcomeBanner').style.display = 'flex';
                document.getElementById('shelterWelcome').textContent = `Welcome, ${user.shelterName}! üè†`;
                document.getElementById('shelterEmail').textContent = user.email;
                
                // Show claimed donations section
                document.getElementById('claimedDonationsSection').style.display = 'block';
                
                // Load claimed donations
                loadClaimedDonations();
            } else {
                // Hide welcome banner and claimed donations
                document.getElementById('shelterWelcomeBanner').style.display = 'none';
                document.getElementById('claimedDonationsSection').style.display = 'none';
            }
            
            // Load available donations and leaderboard
            loadDonations();
            loadLeaderboard();
            
            window.scrollTo(0, 0);
        }

        // Load shelter's claimed donations
        async function loadClaimedDonations() {
            console.log('üìã loadClaimedDonations called');
            
            try {
                console.log('üì° Fetching shelter donations from API...');
                const response = await fetch(`${API_URL}/api/shelter-donations`, {
                    credentials: 'include'
                });
                
                console.log('üì° Response status:', response.status);
                
                const container = document.getElementById('claimedDonationsList');
                
                if (!response.ok) {
                    console.error('‚ùå API returned error status:', response.status);
                    if (response.status === 401) {
                        console.log('‚ÑπÔ∏è Not authenticated - hiding claimed donations section');
                        container.innerHTML = '<p style="color: var(--gray-600);">Please log in to see your claimed donations.</p>';
                    } else {
                        container.innerHTML = '<p style="color: var(--gray-600);">Error loading donations. Please refresh the page.</p>';
                    }
                    return;
                }
                
                const donations = await response.json();
                console.log('üì¶ Received donations:', donations);
                
                if (!donations || donations.length === 0) {
                    console.log('‚ÑπÔ∏è No claimed donations found');
                    container.innerHTML = '<p style="color: var(--gray-600);">You haven\'t claimed any donations yet!</p>';
                    return;
                }

                console.log('‚úÖ Displaying', donations.length, 'claimed donations');
                container.innerHTML = donations.map(donation => `
                    <div class="donation-card">
                        <h3>${donation.restaurantName}</h3>
                        <div class="food-type">${donation.foodType}</div>
                        <div class="info">üì¶ ${donation.quantity} meals</div>
                        <div class="info">‚è±Ô∏è Pickup by: ${new Date(donation.expiresAt).toLocaleString()}</div>
                        <div class="info">üå± Impact: ${parseFloat(donation.carbonSaved).toFixed(2)} kg CO‚ÇÇ</div>
                        <div class="info">üìç ${donation.location ? donation.location.address : 'N/A'}</div>
                        <div class="info" style="color: var(--emerald); font-weight: 600;">‚úÖ Claimed</div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('‚ùå Error loading claimed donations:', error);
            }
        }

        // Modal controls
        function showLoginForm() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        function showSignupForm() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
        }

        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
            showLoginForm(); // Reset to login form
        }

        // Show restaurant dashboard with user data
        function showRestaurantDashboard(user) {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'block';
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            
            // Display user info
            document.getElementById('restaurantWelcome').textContent = `Welcome, ${user.businessName}! üçΩÔ∏è`;
            document.getElementById('restaurantEmail').textContent = user.email;
            
            // Pre-fill address if available
            if (user.address) {
                document.getElementById('restaurantAddress').value = user.address;
            }
            
            // Load restaurant's donations
            loadRestaurantDonations();
            
            window.scrollTo(0, 0);
        }

        // Enhanced donation creation with new fields
        async function createEnhancedDonation(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            
            // Collect allergens and dietary info
            const allergens = Array.from(formData.getAll('allergens'));
            const dietary = Array.from(formData.getAll('dietary'));
            
            const donationData = {
                restaurantName: currentUser ? currentUser.businessName : 'Anonymous',
                foodType: formData.get('foodType'),
                quantity: parseInt(formData.get('quantity')),
                mealCategory: formData.get('mealCategory'),
                allergens: allergens.join(', ') || 'None specified',
                dietaryInfo: dietary.join(', ') || 'None specified',
                preparationTime: formData.get('prepTime') || 'Not specified',
                address: formData.get('address'),
                expiresIn: parseInt(formData.get('expiresIn'))
            };
            
            try {
                const response = await fetch(`${API_URL}/api/donations`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(donationData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    document.getElementById('donationSuccess').innerHTML = `
                        <div class="alert success" style="margin-top: 1rem; padding: 1rem; background: #d1fae5; border-radius: 8px; color: #065f46;">
                            ‚úÖ Meal posted successfully!<br>
                            <strong>Environmental Impact:</strong> ${result.donation.carbonSaved} kg CO‚ÇÇ saved<br>
                            <strong>Meals:</strong> ${result.donation.quantity} meals available for pickup
                        </div>
                    `;
                    form.reset();
                    
                    // Reload donations list and stats
                    loadRestaurantDonations();
                    loadStats();
                    
                    setTimeout(() => {
                        document.getElementById('donationSuccess').innerHTML = '';
                    }, 5000);
                } else {
                    alert(result.error || 'Failed to post meal');
                }
            } catch (error) {
                alert('Error posting meal. Please try again.');
            }
        }

        // Animated Counter
        function animateCounter(id, end, suffix = '') {
            const element = document.getElementById(id);
            const duration = 2000;
            const steps = 60;
            const increment = end / steps;
            let current = 0;
            const timer = setInterval(() => {
                current += increment;
                if (current >= end) {
                    element.textContent = Math.round(end) + suffix;
                    clearInterval(timer);
                } else {
                    element.textContent = Math.round(current) + suffix;
                }
            }, duration / steps);
        }

        // Load stats and animate
        async function loadStats() {
            try {
                const response = await fetch(`${API_URL}/api/stats`, {
                    credentials: 'include'
                });
                const stats = await response.json();
                
                animateCounter('heroMeals', stats.totalMealsSaved || 0, '+');
                animateCounter('heroCarbon', parseFloat(stats.totalCarbonSaved) || 0, ' lbs');
                animateCounter('heroPartners', (stats.totalDonations || 0) + (stats.activeShelters || 0), '+');
                
                document.getElementById('impactMeals').textContent = stats.totalMealsSaved || 0;
                document.getElementById('impactCarbon').textContent = (parseFloat(stats.totalCarbonSaved) || 0).toFixed(1) + ' kg';
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Show/Hide Sections with Authentication Check
        async function showDashboard(type) {
            if (type === 'restaurant') {
                // Check if restaurant user is logged in
                const user = await checkAuth();
                if (!user) {
                    // Show login modal
                    document.getElementById('authModal').style.display = 'block';
                    showLoginForm();
                } else {
                    // User is logged in, show dashboard
                    showRestaurantDashboard(user);
                }
            } else if (type === 'shelter') {
                // Check if shelter user is logged in
                const shelterUser = await checkShelterAuth();
                if (!shelterUser) {
                    // Show shelter login modal but also show dashboard
                    document.getElementById('shelterAuthModal').style.display = 'block';
                    showShelterLoginForm();
                    // Still show dashboard so they can browse
                    showShelterDashboard(null);
                } else {
                    // User is logged in, show dashboard with user data
                    showShelterDashboard(shelterUser);
                }
            }
        }

        function showLanding() {
            document.getElementById('landing-page').style.display = 'block';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('about-page').style.display = 'none';
            document.getElementById('contact-page').style.display = 'none';
            document.getElementById('privacy-page').style.display = 'none';
            document.getElementById('terms-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Show Inspiration Section
        function showInspiration() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'block';
            document.getElementById('about-page').style.display = 'none';
            document.getElementById('contact-page').style.display = 'none';
            document.getElementById('privacy-page').style.display = 'none';
            document.getElementById('terms-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Show About Us Page
        function showAbout() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('about-page').style.display = 'block';
            document.getElementById('contact-page').style.display = 'none';
            document.getElementById('privacy-page').style.display = 'none';
            document.getElementById('terms-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Show Contact Page
        function showContact() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('about-page').style.display = 'none';
            document.getElementById('contact-page').style.display = 'block';
            document.getElementById('privacy-page').style.display = 'none';
            document.getElementById('terms-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Show Privacy Policy Page
        function showPrivacy() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('about-page').style.display = 'none';
            document.getElementById('contact-page').style.display = 'none';
            document.getElementById('privacy-page').style.display = 'block';
            document.getElementById('terms-page').style.display = 'none';
            window.scrollTo(0, 0);
        }

        // Show Terms of Service Page
        function showTerms() {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('restaurant-dashboard').style.display = 'none';
            document.getElementById('shelter-dashboard').classList.remove('active');
            document.getElementById('inspiration-page').style.display = 'none';
            document.getElementById('about-page').style.display = 'none';
            document.getElementById('contact-page').style.display = 'none';
            document.getElementById('privacy-page').style.display = 'none';
            document.getElementById('terms-page').style.display = 'block';
            window.scrollTo(0, 0);
        }

        // Handle Contact Form Submission
        function handleContactSubmit(event) {
            event.preventDefault();
            
            // Show success message
            document.getElementById('contactSuccess').style.display = 'block';
            
            // Reset form
            event.target.reset();
            
            // Hide success message after 5 seconds
            setTimeout(() => {
                document.getElementById('contactSuccess').style.display = 'none';
            }, 5000);
            
            return false;
        }

        // Create Donation
        async function createDonation() {
            const donation = {
                restaurantName: document.getElementById('restaurantName').value,
                foodType: document.getElementById('foodType').value,
                quantity: parseInt(document.getElementById('quantity').value),
                address: document.getElementById('address').value,
                expiresIn: parseInt(document.getElementById('expiresIn').value)
            };

            try {
                const response = await fetch(`${API_URL}/api/donations`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(donation)
                });

                const result = await response.json();
                
                document.getElementById('donationSuccess').innerHTML = `
                    <div class="alert success" style="margin-top: 1rem;">
                        ‚úÖ Donation created successfully! Carbon impact: ${result.donation.carbonImpact.toFixed(2)} kg CO‚ÇÇ saved.
                    </div>
                `;

                // Clear form
                document.getElementById('restaurantName').value = '';
                document.getElementById('foodType').value = '';
                document.getElementById('quantity').value = '';
                document.getElementById('address').value = '';
                document.getElementById('expiresIn').value = '4';

                // Reload donations
                loadRestaurantDonations();
                loadStats();
            } catch (error) {
                console.error('Error creating donation:', error);
                alert('Error creating donation. Please try again.');
            }
        }

        // Load Restaurant's Donations (filtered by current user)
        async function loadRestaurantDonations() {
            try {
                // Only fetch donations for the current logged-in restaurant
                const url = currentUser && currentUser.id 
                    ? `${API_URL}/api/donations?restaurantUserId=${currentUser.id}`
                    : `${API_URL}/api/donations`;
                    
                const response = await fetch(url, {
                    credentials: 'include'
                });
                const donations = await response.json();
                
                const container = document.getElementById('restaurantDonations');
                if (donations.length === 0) {
                    container.innerHTML = '<p style="color: var(--gray-600);">No donations yet. Create your first donation above!</p>';
                    return;
                }

                container.innerHTML = donations.slice(0, 6).map(donation => `
                    <div class="donation-card">
                        <h3>${donation.restaurantName}</h3>
                        <div class="food-type">${donation.foodType}</div>
                        <div class="info">üì¶ ${donation.quantity} meals</div>
                        <div class="info">‚è±Ô∏è Expires: ${new Date(donation.expiresAt).toLocaleString()}</div>
                        <div class="info">üå± Impact: ${donation.carbonSaved.toFixed(2)} kg CO‚ÇÇ</div>
                        <div class="info">üìç ${donation.location ? donation.location.address : 'N/A'}</div>
                        ${donation.claimed ? '<div class="info" style="color: var(--emerald); font-weight: 600;">‚úÖ Claimed</div>' : '<div class="info" style="color: var(--amber); font-weight: 600;">‚è≥ Available</div>'}
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading donations:', error);
            }
        }

        // Load Available Donations (for shelters)
        async function loadDonations() {
            try {
                const response = await fetch(`${API_URL}/api/donations`, {
                    credentials: 'include'
                });
                const donations = await response.json();
                
                const available = donations.filter(d => !d.claimed);
                const container = document.getElementById('donationsList');
                
                if (available.length === 0) {
                    container.innerHTML = '<p style="color: var(--gray-600);">No available donations at the moment. Check back soon!</p>';
                    return;
                }

                container.innerHTML = available.map(donation => `
                    <div class="donation-card">
                        <h3>${donation.restaurantName}</h3>
                        <div class="food-type">${donation.foodType}</div>
                        <div class="info">üì¶ ${donation.quantity} meals</div>
                        <div class="info">‚è±Ô∏è Expires: ${new Date(donation.expiresAt).toLocaleString()}</div>
                        <div class="info">üå± Impact: ${donation.carbonSaved.toFixed(2)} kg CO‚ÇÇ</div>
                        <div class="info">üìç ${donation.location ? donation.location.address : 'N/A'}</div>
                        <button class="cta-button" onclick="claimDonation('${donation.id}')">ü§ù Claim Donation</button>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading donations:', error);
            }
        }

        // Claim Donation
        async function claimDonation(donationId) {
            console.log('üîç Claiming donation, currentShelterUser is:', currentShelterUser);
            // Check if shelter is logged in
            if (!currentShelterUser) {
                console.log('‚ùå currentShelterUser is null, showing login modal');
                document.getElementById('shelterAuthModal').style.display = 'block';
                showShelterLoginForm();
                return;
            }
            console.log('‚úÖ User is logged in, proceeding with claim');

            try {
                const response = await fetch(`${API_URL}/api/matches`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ donationId })
                });

                const result = await response.json();
                
                if (response.ok) {
                    // Immediately reload all relevant lists for instant feedback
                    await Promise.all([
                        loadDonations(),
                        loadClaimedDonations(),
                        loadLeaderboard(),
                        loadStats()
                    ]);
                } else {
                    alert(result.error || 'Error claiming donation. It may have already been claimed.');
                }
            } catch (error) {
                console.error('Error claiming donation:', error);
                alert('Error claiming donation. Please try again.');
            }
        }

        // Load Leaderboard
        async function loadLeaderboard() {
            try {
                const response = await fetch(`${API_URL}/api/leaderboard`, {
                    credentials: 'include'
                });
                const leaderboard = await response.json();
                
                const container = document.getElementById('leaderboardList');
                if (leaderboard.length === 0) {
                    container.innerHTML = '<p style="color: var(--gray-600);">No leaderboard data yet.</p>';
                    return;
                }

                container.innerHTML = leaderboard.map((shelter, index) => {
                    let rankClass = '';
                    let medal = '';
                    if (index === 0) { rankClass = 'gold'; medal = 'ü•á'; }
                    else if (index === 1) { rankClass = 'silver'; medal = 'ü•à'; }
                    else if (index === 2) { rankClass = 'bronze'; medal = 'ü•â'; }
                    
                    return `
                        <div class="leaderboard-item ${rankClass}">
                            <div class="rank">${medal || `#${index + 1}`}</div>
                            <div class="shelter-name">${shelter.shelterName}</div>
                            <div class="points">${shelter.points} points</div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Error loading leaderboard:', error);
            }
        }

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && href.startsWith('#')) {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        });

        // Initialize
        window.addEventListener('load', async () => {
            loadStats();
            
            // Check if user is logged in and update nav UI
            const restaurantUser = await checkAuth();
            const shelterUser = await checkShelterAuth();
            updateNavAuthUI();
            
            // If user is logged in, show their dashboard instead of landing page
            if (restaurantUser) {
                showRestaurantDashboard(restaurantUser);
            } else if (shelterUser) {
                showShelterDashboard(shelterUser);
            }
        });
    </script>
</body>
</html>
